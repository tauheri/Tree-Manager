<!-- tree.html -->
{% load mptt_tags %}

<ul class="tree">
    {% recursetree nodes %}
        <li>
            {{ node.label }}
            <form method="post" action="{% url 'edit-node' node.id %}" style="display:inline;">
                {% csrf_token %}
                <input type="submit" value="Edit">
            </form>
            <form method="post" action="{% url 'delete-node' node.id %}" style="display:inline;">
                {% csrf_token %}
                <input type="submit" value="Delete">
            </form>
            {% if not node.is_leaf_node %}
                <ul>{{ children }}</ul>
            {% endif %}
        </li>
    {% endrecursetree %}
</ul>

<form method="post" action="{% url 'add-node' %}">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Add Node">
</form>